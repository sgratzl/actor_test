version: '2.0'
services:
  db:
    image: openjdk:jre-alpine
    volumes:
      - '.:/ws'
    working_dir: /ws
    command: 'java -cp ".:lib/*" -jar lib/derbyrun.jar server start'
  slave:
    image: openjdk:jre-alpine
    depends_on:
      - db
    links:
      - db
    volumes:
      - '.:/ws'
    working_dir: /ws
    command: 'java -cp ".:lib/*:out/production/distributed_matrix" Slave master'
  master:
    image: openjdk:jre-alpine
    depends_on:
      - slave
      - db
    links:
      - slave
      - db
    volumes:
      - '.:/ws'
    working_dir: /ws
    command: 'java -cp ".:lib/*:out/production/distributed_matrix" Master 1000'
